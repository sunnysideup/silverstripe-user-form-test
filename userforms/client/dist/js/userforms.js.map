{"version":3,"sources":["webpack:///webpack/bootstrap 325808fec45682ebc89a","webpack:///./client/src/bundles/UserForms.js","webpack:///./client/src/bundles/bundle.js","webpack:///external \"i18n\"","webpack:///external \"jQuery\""],"names":["document","ready","$","CONSTANTS","commonMixin","show","$el","attr","hide","ErrorContainer","element","find","text","i18n","_t","prototype","hasErrors","children","length","removeErrorMessage","fieldId","remove","addStepLink","step","userform","closest","data","itemID","$itemElement","stepID","stepTitle","on","e","preventDefault","jumpToStep","id","append","removeStepLink","is","updateErrorMessage","$input","message","inputID","anchor","elementID","messageElement","describedBy","addClass","removeClass","html","each","anchorID","location","pathname","search","match","RegExp","FormStep","self","$elButton","prop","viewed","valid","DISPLAY_ERROR_MESSAGES_AT_TOP","errorContainer","validator","errorList","i","error","trigger","conditionallyHidden","ProgressBar","$buttons","$jsAlign","stepButton","stepNumber","parseInt","target","update","$visibleButtons","filter","button","index","$button","leftPercent","leftPercentCssValue","buttonOffset","innerWidth","css","left","marginLeft","$newStepElement","parent","barWidth","$element","$item","removeAttr","siblings","width","FormActions","$elFormItself","userformInstance","$prevButton","$nextButton","scrollUpFx","scrollTop","offset","animate","top","numberOfSteps","steps","currentStep","lastStep","UserForm","prevStep","nextStep","validate","validationOptions","a","field","rules","required","ignore","errorClass","errorElement","errorPlacement","parents","appendTo","insertAfter","invalidHandler","event","setTimeout","currentElements","first","focus","submitHandler","form","isValid","hiddenInputs","submit","success","errorId","substr","indexOf","replace","addStep","push","setCurrentStep","direction","targetStep","forward","undefined","main","userformElement","$userform","ENABLE_LIVE_VALIDATION","extend","onfocusout","HIDE_FIELD_LABELS","$label","$progressEl","progressBar","$formActionsEl","formActions","ssDatepicker","datepicker","setInterval","ajax","url","areYouSure"],"mappings":"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","file":"js/userforms.js","sourcesContent":[" \t// The module cache\n \tvar installedModules = {};\n\n \t// The require function\n \tfunction __webpack_require__(moduleId) {\n\n \t\t// Check if module is in cache\n \t\tif(installedModules[moduleId]) {\n \t\t\treturn installedModules[moduleId].exports;\n \t\t}\n \t\t// Create a new module (and put it into the cache)\n \t\tvar module = installedModules[moduleId] = {\n \t\t\ti: moduleId,\n \t\t\tl: false,\n \t\t\texports: {}\n \t\t};\n\n \t\t// Execute the module function\n \t\tmodules[moduleId].call(module.exports, module, module.exports, __webpack_require__);\n\n \t\t// Flag the module as loaded\n \t\tmodule.l = true;\n\n \t\t// Return the exports of the module\n \t\treturn module.exports;\n \t}\n\n\n \t// expose the modules object (__webpack_modules__)\n \t__webpack_require__.m = modules;\n\n \t// expose the module cache\n \t__webpack_require__.c = installedModules;\n\n \t// identity function for calling harmony imports with the correct context\n \t__webpack_require__.i = function(value) { return value; };\n\n \t// define getter function for harmony exports\n \t__webpack_require__.d = function(exports, name, getter) {\n \t\tif(!__webpack_require__.o(exports, name)) {\n \t\t\tObject.defineProperty(exports, name, {\n \t\t\t\tconfigurable: false,\n \t\t\t\tenumerable: true,\n \t\t\t\tget: getter\n \t\t\t});\n \t\t}\n \t};\n\n \t// getDefaultExport function for compatibility with non-harmony modules\n \t__webpack_require__.n = function(module) {\n \t\tvar getter = module && module.__esModule ?\n \t\t\tfunction getDefault() { return module['default']; } :\n \t\t\tfunction getModuleExports() { return module; };\n \t\t__webpack_require__.d(getter, 'a', getter);\n \t\treturn getter;\n \t};\n\n \t// Object.prototype.hasOwnProperty.call\n \t__webpack_require__.o = function(object, property) { return Object.prototype.hasOwnProperty.call(object, property); };\n\n \t// __webpack_public_path__\n \t__webpack_require__.p = \"\";\n\n \t// Load entry module and return exports\n \treturn __webpack_require__(__webpack_require__.s = \"./client/src/bundles/bundle.js\");\n\n\n\n// WEBPACK FOOTER //\n// webpack/bootstrap 325808fec45682ebc89a","/**\n * @file Manages the multi-step navigation.\n */\n\nimport jQuery from 'jquery'\nimport i18n from 'i18n'\n\njQuery(document).ready(($) => {\n  // Settings that come from the CMS.\n  const CONSTANTS = {}\n\n  // Common functions that extend multiple classes.\n  const commonMixin = {\n    /**\n     * @func show\n     * @desc Show the form step. Looks after aria attributes too.\n     */\n    show () {\n      this.$el.attr('aria-hidden', false).show()\n    },\n    /**\n     * @func hide\n     * @desc Hide the form step. Looks after aria attributes too.\n     */\n    hide () {\n      this.$el.attr('aria-hidden', true).hide()\n    }\n  }\n\n  /**\n   * @func ErrorContainer\n   * @constructor\n   * @param {object} element - The error container element.\n   * @return {object} - The ErrorContainer instance.\n   * @desc Creates an error container. Used to display step error messages at the top.\n   */\n  function ErrorContainer (element) {\n    this.$el = element instanceof $ ? element : $(element)\n\n    // Set the error container's heading.\n    this.$el.find('h4').text(i18n._t('UserForms.ERROR_CONTAINER_HEADER',\n      'Please correct the following errors and try again:'))\n\n    return this\n  }\n\n  /**\n   * @func hasErrors\n   * @return boolean\n   * @desc Checks if the error container has any error messages.\n   */\n  ErrorContainer.prototype.hasErrors = function hasErrors () {\n    return this.$el.find('.error-list').children().length > 0\n  }\n\n  /**\n   * @func removeErrorMessage\n   * @desc Removes an error message from the error container.\n   */\n  ErrorContainer.prototype.removeErrorMessage = function removeErrorMessage (fieldId) {\n    this.$el.find(`#${fieldId}-top-error`).remove()\n\n    // If there are no more error then hide the container.\n    if (!this.hasErrors()) {\n      this.hide()\n    }\n  }\n\n  /**\n   * @func addStepLink\n   * @param {object} step - FormStep instance.\n   * @desc Adds a link to a form step as an error message.\n   */\n  ErrorContainer.prototype.addStepLink = function addStepLink (step) {\n    const userform = this.$el.closest('.userform').data('inst')\n    const itemID = `${step.$el.attr('id')}-error-link`\n    let $itemElement = this.$el.find(`#${itemID}`)\n    const stepID = step.$el.attr('id')\n    const stepTitle = step.$el.data('title')\n\n    // If the item already exists we don't need to do anything.\n    if ($itemElement.length) {\n      return\n    }\n\n    $itemElement = $(`<li id=\"${itemID}\"><a href=\"#${stepID}\">${stepTitle}</a></li>`)\n\n    $itemElement.on('click', (e) => {\n      e.preventDefault()\n      userform.jumpToStep(step.id)\n    })\n\n    this.$el.find('.error-list').append($itemElement)\n  }\n\n  /**\n   * @func removeStepLink\n   * @param {object} step - FormStep instance.\n   * @desc Removes a step link from the error container.\n   */\n  ErrorContainer.prototype.removeStepLink = function removeStepLink (fieldId) {\n    const stepID = $(`#${fieldId}`).closest('.form-step').attr('id')\n\n    this.$el.find(`#${stepID}-error-link`).remove()\n\n    // Hide the error container if we've just removed the last error.\n    if (this.$el.find('.error-list').is(':empty')) {\n      this.hide()\n    }\n  }\n\n  /**\n   * @func ErrorContainer.updateErrorMessage\n   * @param {object} $input - The jQuery input object which contains the field to validate.\n   * @param {object} message - The error message to display (html escaped).\n   * @desc Update an error message (displayed at the top of the form).\n   */\n  ErrorContainer.prototype.updateErrorMessage = function updateErrorMessage ($input, message) {\n    const inputID = $input.attr('id')\n    let anchor = `#${inputID}`\n    const elementID = `${inputID}-top-error`\n    let messageElement = $(`#${elementID}`)\n    let describedBy = $input.attr('aria-describedby')\n\n    // The 'message' param will be an empty string if the field is valid.\n    if (!message) {\n      // Style issues as fixed if they already exist\n      messageElement.addClass('fixed')\n      return\n    }\n\n    messageElement.removeClass('fixed')\n\n    this.show()\n\n    if (messageElement.length === 1) {\n      // Update the existing error message.\n      messageElement.show().find('a').html(message)\n    } else {\n      // Generate better link to field\n      $input.closest('.field[id]').each(() => {\n        const anchorID = $(this).attr('id')\n\n        if (!anchorID) {\n          return\n        }\n\n        anchor = `#${anchorID}`\n      })\n\n      // Add a new error message\n      messageElement = $('<li><a></a></li>')\n      messageElement\n        .attr('id', elementID)\n        .find('a')\n        .attr('href', location.pathname + location.search + anchor)\n        .html(message)\n\n      this.$el.find('ul').append(messageElement)\n\n      // Link back to original input via aria\n      // Respect existing non-error aria-describedby\n      if (!describedBy) {\n        describedBy = elementID\n      } else if (!describedBy.match(new RegExp(`\\\\b${elementID}\\\\b`))) {\n        // Add to end of list if not already present\n        describedBy += ` ${elementID}`\n      }\n\n      $input.attr('aria-describedby', describedBy)\n    }\n  }\n\n  /**\n   * @func FormStep\n   * @constructor\n   * @param {object} element\n   * @return {object} - The FormStep instance.\n   * @desc Creates a form step.\n   */\n  function FormStep (element) {\n    const self = this\n\n    this.$el = element instanceof $ ? element : $(element)\n\n    const userform = this.$el.closest('.userform').data('inst')\n\n    // Find button for this step\n    this.$elButton = $(`.step-button-wrapper[data-for='${this.$el.prop('id')}']`)\n\n    // Has the step been viewed by the user?\n    this.viewed = false\n\n    // Is the form step valid?\n    // This value is used on form submission, which fails, if any of the steps are invalid.\n    this.valid = false\n\n    // The internal id of the step. Used for getting the step from the UserForm.steps array.\n    this.id = null\n\n    this.hide()\n\n    if (CONSTANTS.DISPLAY_ERROR_MESSAGES_AT_TOP) {\n      this.errorContainer = new ErrorContainer(this.$el.find('.error-container'))\n\n      // Listen for errors on the UserForm.\n      userform.$el.on('userform.form.error', (e, validator) => {\n        // The step only cares about errors if it's currently visible.\n        if (!self.$el.is(':visible')) {\n          return\n        }\n\n        // Add or update each error in the list.\n        $.each(validator.errorList, (i, error) => {\n          self.errorContainer.updateErrorMessage($(error.element), error.message)\n        })\n      })\n\n      // Listen for fields becoming valid\n      userform.$el.on('userform.form.valid', (e, fieldId) => {\n        self.errorContainer.removeErrorMessage(fieldId)\n      })\n    }\n\n    // Ensure that page visibilty updates the step navigation\n    this\n      .$elButton\n      .on('userform.field.hide userform.field.show', () => {\n        userform.$el.trigger('userform.form.conditionalstep')\n      })\n\n    return this\n  }\n\n  /**\n   * Determine if this step is conditionally disabled\n   *\n   * @returns {Boolean}\n   */\n  // Because the element itself could be visible but 0 height, so check visibility of button\n  FormStep.prototype.conditionallyHidden = function conditionallyHidden () {\n    return !this.$elButton.find('button').is(':visible')\n  }\n\n  /**\n   * @func ProgressBar\n   * @constructor\n   * @param {object} element\n   * @return {object} - The Progress bar instance.\n   * @desc Creates a progress bar.\n   */\n  function ProgressBar (element) {\n    const self = this\n\n    this.$el = element instanceof $ ? element : $(element)\n    this.$buttons = this.$el.find('.step-button-jump')\n    this.$jsAlign = this.$el.find('.js-align')\n    const userform = this.$el.closest('.userform').data('inst')\n\n    // Update the progress bar when 'step' buttons are clicked.\n    this.$buttons.each((i, stepButton) => {\n      $(stepButton).on('click', (e) => {\n        e.preventDefault()\n        const stepNumber = parseInt($(e.target).data('step'), 10)\n        self.$el.trigger('userform.progress.changestep', stepNumber)\n      })\n    })\n\n    // Update the progress bar when 'prev' and 'next' buttons are clicked.\n    userform.$el.on('userform.form.changestep', (e, stepID) => {\n      self.update(stepID)\n    })\n\n    // Listen for steps being conditionally shown / hidden by display rules.\n    // We need to update step related UI like the number of step buttons\n    // and any text that shows the total number of steps.\n    userform.$el.on('userform.form.conditionalstep', () => {\n      // Update the step numbers on the buttons.\n      const $visibleButtons = self.$buttons.filter(':visible')\n\n      $visibleButtons.each((i, button) => {\n        $(button).text(i + 1)\n      })\n\n      // Update the actual progress bar.\n      self.$el.find('.progress-bar').attr('aria-valuemax', $visibleButtons.length)\n\n      // Update any text that uses the total number of steps.\n      self.$el.find('.total-step-number').text($visibleButtons.length)\n    })\n\n    // Spaces out the steps below progress bar evenly\n    this.$jsAlign.each((index, button) => {\n      const $button = $(button)\n      const leftPercent = (100 / (self.$jsAlign.length - 1)) * index\n      const leftPercentCssValue = `${leftPercent}%`\n      const buttonOffset = -1 * ($button.innerWidth() / 2)\n\n      $button.css({\n        left: leftPercentCssValue,\n        marginLeft: buttonOffset\n      })\n\n      // First and last buttons are kept within userform-progress container\n      if (index === self.$jsAlign.length - 1) {\n        $button.css({ marginLeft: buttonOffset * 2 })\n      } else if (index === 0) {\n        $button.css({ marginLeft: 0 })\n      }\n    })\n\n    return this\n  }\n\n  /**\n   * @func ProgressBar.update\n   * @param {number} stepID - Zero based index of the new step.\n   * @desc Update the progress element to show a new step.\n   */\n  ProgressBar.prototype.update = function update (stepID) {\n    const $newStepElement = $(this.$el.parent('.userform').find('.form-step')[stepID])\n    let stepNumber = 0\n    let barWidth = (stepID / (this.$buttons.length - 1)) * 100\n\n    // Set the current step number.\n    this.$buttons.each((i, button) => {\n      if (i > stepID) {\n        // Break the loop\n        return false\n      }\n\n      if ($(button).is(':visible')) {\n        stepNumber += 1\n      }\n      return true\n    })\n\n    // Update elements that contain the current step number.\n    this.$el.find('.current-step-number').each((i, element) => {\n      $(element).text(stepNumber)\n    })\n\n    // Update aria attributes.\n    this.$el.find('[aria-valuenow]').each((i, element) => {\n      $(element).attr('aria-valuenow', stepNumber)\n    })\n\n    // Update the CSS classes on step buttons.\n    this.$buttons.each((i, element) => {\n      const $element = $(element)\n      const $item = $element.parent()\n\n      if (parseInt($element.data('step'), 10) === stepNumber && $element.is(':visible')) {\n        $item.addClass('current viewed')\n        $element.removeAttr('disabled')\n\n        return\n      }\n\n      $item.removeClass('current')\n    })\n\n    // Update the progress bar's title with the new step's title.\n    this.$el.siblings('.progress-title').text($newStepElement.data('title'))\n\n    // Update the width of the progress bar.\n    barWidth = barWidth ? `${barWidth}%` : ''\n    this.$el.find('.progress-bar').width(barWidth)\n  }\n\n  /**\n   * @func FormActions\n   * @constructor\n   * @param {object} element\n   * @desc Creates the navigation and actions (Prev, Next, Submit buttons).\n   */\n  function FormActions (element) {\n    const self = this\n\n    this.$el = element instanceof $ ? element : $(element)\n    const $elFormItself = this.$el.closest('.userform')\n\n    this.userformInstance = $elFormItself.data('inst')\n\n    this.$prevButton = this.$el.find('.step-button-prev')\n    this.$nextButton = this.$el.find('.step-button-next')\n\n    // Show the buttons.\n    this.$prevButton.parent().attr('aria-hidden', false).show()\n    this.$nextButton.parent().attr('aria-hidden', false).show()\n\n    const scrollUpFx = function (e) {\n      const scrollTop = $elFormItself.offset()\n      $('html, body').animate({scrollTop: scrollTop.top}, 'slow')\n    }\n    // Bind the step navigation event listeners.\n    this.$prevButton.on('click', (e) => {\n      e.preventDefault()\n      scrollUpFx(e)\n      self.$el.trigger('userform.action.prev')\n    })\n    this.$nextButton.on('click', (e) => {\n      e.preventDefault()\n      scrollUpFx(e)\n      self.$el.trigger('userform.action.next')\n    })\n\n    // Listen for changes to the current form step, or conditional pages,\n    // so we can show hide buttons appropriately.\n    this.userformInstance.$el.on('userform.form.changestep userform.form.conditionalstep', () => {\n      self.update()\n    })\n\n    return this\n  }\n\n  /**\n   * @func FormActions.update\n   * @param {number} stepID - Zero based ID of the current step.\n   * @desc Updates the form actions element to reflect the current state of the page.\n   */\n  FormActions.prototype.update = function update () {\n    const numberOfSteps = this.userformInstance.steps.length\n    const stepID = this.userformInstance.currentStep ? this.userformInstance.currentStep.id : 0\n    let i = null\n    let lastStep = null\n\n    // Update the \"Prev\" button.\n    this.$el.find('.step-button-prev')[stepID === 0 ? 'hide' : 'show']()\n\n    // Find last step, skipping hidden ones\n    for (i = numberOfSteps - 1; i >= 0; i--) {\n      lastStep = this.userformInstance.steps[i]\n\n      // Skip if step is hidden\n      if (!lastStep.conditionallyHidden()) {\n        // Update the \"Next\" button.\n        this.$el.find('.step-button-next')[stepID >= i ? 'hide' : 'show']()\n\n        // Update the \"Actions\".\n        this.$el.find('.btn-toolbar')[stepID >= i ? 'show' : 'hide']()\n\n        // Stop processing last step\n        break\n      }\n    }\n  }\n\n  /**\n   * @func UserForm\n   * @constructor\n   * @param {object} element\n   * @return {object} - The UserForm instance.\n   * @desc The form\n   */\n  function UserForm (element) {\n    const self = this\n\n    this.$el = element instanceof $ ? element : $(element)\n    this.steps = []\n\n    // Add an error container which displays a list of invalid steps on form submission.\n    this.errorContainer = new ErrorContainer(this.$el.children('.error-container'))\n\n    // Listen for events triggered by form steps.\n    this.$el.on('userform.action.prev', () => {\n      self.prevStep()\n    })\n    this.$el.on('userform.action.next', () => {\n      self.nextStep()\n    })\n\n    // Listen for events triggered by the progress bar.\n    this.$el.find('.userform-progress').on('userform.progress.changestep', (e, stepNumber) => {\n      self.jumpToStep(stepNumber - 1)\n    })\n\n    // When a field becomes valid, remove errors from the error container.\n    this.$el.on('userform.form.valid', (e, fieldId) => {\n      self.errorContainer.removeStepLink(fieldId)\n    })\n\n    this.$el.validate(this.validationOptions)\n\n    // Ensure checkbox groups are validated correctly\n    this.$el.find('.optionset.requiredField input').each((a, field) => {\n      $(field).rules('add', {\n        required: true\n      })\n    })\n\n    return this\n  }\n\n  /*\n   * Default options for step validation. These get extended in main().\n   */\n  UserForm.prototype.validationOptions = {\n    ignore: ':hidden,ul',\n    errorClass: 'error',\n    errorElement: 'span',\n    errorPlacement: (error, element) => {\n      error.addClass('message')\n\n      if (element.is(':radio') || element.parents('.checkboxset').length > 0) {\n        error.appendTo(element.closest('.middleColumn, .field'))\n      } else if (element.parents('.checkbox').length > 0) {\n        error.appendTo(element.closest('.field'))\n      } else {\n        error.insertAfter(element)\n      }\n    },\n    invalidHandler: (event, validator) => {\n      // setTimeout 0 so it runs after errorPlacement\n      setTimeout(() => {\n        validator.currentElements.filter('.error').first().focus()\n      }, 0)\n    },\n    // Callback for handling the actual submit when the form is valid.\n    // Submission in the jQuery.validate sence is handled at step level.\n    // So when the final step is submitted we have to also check all previous steps are valid.\n    submitHandler: (form) => {\n      let isValid = true\n      const userform = $(form).closest('.userform').data('inst')\n\n      // Validate the current step\n      if (userform.currentStep) {\n        userform.currentStep.valid = $(form).valid()\n      }\n\n      // Check for invalid previous steps.\n      $.each(userform.steps, (i, step) => {\n        if (!step.valid && !step.conditionallyHidden()) {\n          isValid = false\n          userform.errorContainer.addStepLink(step)\n        }\n      })\n\n      if (isValid) {\n        // Remove required attributes on hidden fields\n        const hiddenInputs = $(form).find('.field.requiredField.hide input')\n        if (hiddenInputs.length > 0) {\n          hiddenInputs.removeAttr('required aria-required data-rule-required').valid()\n        }\n\n        // When using the \"are you sure?\" plugin, ensure the form immediately submits.\n        $(form).removeClass('dirty')\n\n        form.submit()\n        userform.$el.trigger('userform.form.submit')\n      } else {\n        userform.errorContainer.show()\n      }\n    },\n    // When a field becomes valid.\n    success: (error) => {\n      const userform = $(error).closest('.userform').data('inst')\n      const errorId = $(error).attr('id')\n      const fieldId = errorId.substr(0, errorId.indexOf('-error')).replace(/[\\\\[\\\\]]/, '')\n\n      // Remove square brackets since jQuery.validate.js uses idOrName,\n      // which breaks further on when using a selector that end with\n      // square brackets.\n\n      error.remove()\n\n      // Pass the field's ID with the event\n      userform.$el.trigger('userform.form.valid', [fieldId])\n    }\n  }\n\n  /**\n   * @func UserForm.addStep\n   * @param {object} step - An instance of FormStep.\n   * @desc Adds a step to the UserForm.\n   */\n  UserForm.prototype.addStep = function addStep (step) {\n    // Make sure we're dealing with a form step.\n    if (!(step instanceof FormStep)) {\n      return\n    }\n\n    // eslint-disable-next-line no-param-reassign\n    step.id = this.steps.length\n\n    this.steps.push(step)\n  }\n\n  /**\n   * @func UserForm.setCurrentStep\n   * @param {object} step - An instance of FormStep.\n   * @desc Sets the step the user is currently on.\n   */\n  UserForm.prototype.setCurrentStep = function setCurrentStep (step) {\n    // Make sure we're dealing with a form step.\n    if (!(step instanceof FormStep)) {\n      return\n    }\n\n    this.currentStep = step\n    this.currentStep.show()\n\n    // Record the user has viewed the step.\n    this.currentStep.viewed = true\n    this.currentStep.$el.addClass('viewed')\n  }\n\n  /**\n   * @func UserForm.jumpToStep\n   * @param {number} stepNumber\n   * @param {boolean} [direction] - Defaults to forward (true).\n   * @desc Jumps to a specific form step.\n   */\n  UserForm.prototype.jumpToStep = function jumpToStep (stepNumber, direction) {\n    const targetStep = this.steps[stepNumber]\n    let isValid = false\n    const forward = direction === undefined ? true : direction\n\n    // Make sure the target step exists.\n    if (targetStep === undefined) {\n      return\n    }\n\n    // Make sure the step we're trying to set as current is not\n    // hidden by custom display rules. If it is then jump to the next step.\n    if (targetStep.conditionallyHidden()) {\n      if (forward) {\n        this.jumpToStep(stepNumber + 1)\n      } else {\n        this.jumpToStep(stepNumber - 1)\n      }\n\n      return\n    }\n\n    // Validate the form.\n    // This well effectivly validate the current step and not the entire form.\n    // This is because hidden fields are excluded from validation, and all fields\n    // on all other steps, are currently hidden.\n    isValid = this.$el.valid()\n\n    // Set the 'valid' property on the current step.\n    this.currentStep.valid = isValid\n\n    // Users can navigate to step's they've already viewed even if the current step is invalid.\n    if (isValid === false && targetStep.viewed === false) {\n      return\n    }\n\n    this.currentStep.hide()\n    this.setCurrentStep(targetStep)\n\n    this.$el.trigger('userform.form.changestep', [targetStep.id])\n  }\n\n  /**\n   * @func UserForm.nextStep\n   * @desc Advances the form to the next step.\n   */\n  UserForm.prototype.nextStep = function nextStep () {\n    this.jumpToStep(this.steps.indexOf(this.currentStep) + 1, true)\n  }\n\n  /**\n   * @func UserForm.prevStep\n   * @desc Goes back one step (not bound to browser history).\n   */\n  UserForm.prototype.prevStep = function prevStep () {\n    this.jumpToStep(this.steps.indexOf(this.currentStep) - 1, false)\n  }\n\n  /**\n   * @func main\n   * @desc Bootstraps the front-end.\n   */\n  function main (index, userformElement) {\n    const $userform = $(userformElement)\n\n    // If there's no userform, do nothing.\n    if ($userform.length === 0) {\n      return\n    }\n\n    CONSTANTS.ENABLE_LIVE_VALIDATION = $userform.data('livevalidation') !== undefined\n    CONSTANTS.DISPLAY_ERROR_MESSAGES_AT_TOP = $userform.data('toperrors') !== undefined\n\n    // Extend the default validation options with conditional options\n    // that are set by the user in the CMS.\n    if (CONSTANTS.ENABLE_LIVE_VALIDATION === false) {\n      $.extend(UserForm.prototype.validationOptions, {\n        onfocusout: false\n      })\n    }\n\n    if (CONSTANTS.DISPLAY_ERROR_MESSAGES_AT_TOP) {\n      $.extend(UserForm.prototype.validationOptions, {\n        // Callback for custom code when an invalid form / step is submitted.\n        invalidHandler: (event, validator) => {\n          $userform.trigger('userform.form.error', [validator])\n        },\n        onfocusout: false\n      })\n    }\n\n    // Display all the things that are hidden when JavaScript is disabled.\n    $userform.find('.userform-progress, .step-navigation').attr('aria-hidden', false).show()\n\n    // Extend classes with common functionality.\n    $.extend(FormStep.prototype, commonMixin)\n    $.extend(ErrorContainer.prototype, commonMixin)\n\n    const userform = new UserForm($userform)\n    $userform.data('inst', userform)\n\n    // Conditionally hide field labels and use HTML5 placeholder instead.\n    if (CONSTANTS.HIDE_FIELD_LABELS) {\n      $userform.find('label.left').each(() => {\n        const $label = $(this)\n\n        $(`[name=\"${$label.attr('for')}\"]`).attr('placeholder', $label.text())\n        $label.remove()\n      })\n    }\n\n    // Initialise the form steps.\n    userform.$el.find('.form-step').each((i, element) => {\n      const step = new FormStep(element)\n\n      userform.addStep(step)\n    })\n\n    userform.setCurrentStep(userform.steps[0])\n\n    // Initialise actions and progressbar\n    const $progressEl = $userform.find('.userform-progress')\n    if ($progressEl.length) {\n      const progressBar = new ProgressBar($progressEl)\n      progressBar.update(0)\n    }\n\n    const $formActionsEl = $userform.find('.step-navigation')\n    if ($formActionsEl.length) {\n      const formActions = new FormActions($formActionsEl)\n      formActions.update()\n    }\n\n    // Enable jQuery UI datepickers\n    $(document).on('click', 'input.text[data-showcalendar]', () => {\n      const $element = $(this)\n\n      $element.ssDatepicker()\n\n      if ($element.data('datepicker')) {\n        $element.datepicker('show')\n      }\n    })\n\n    // Make sure the form doesn't expire on the user. Pings every 3 mins.\n    setInterval(() => {\n      $.ajax({ url: 'UserDefinedFormController/ping' })\n    }, 180 * 1000)\n\n    // Bind a confirmation message when navigating away from a partially completed form.\n    if (typeof $userform.areYouSure !== 'undefined') {\n      $userform.areYouSure({\n        message: i18n._t('UserForms.LEAVE_CONFIRMATION', 'You have unsaved changes!')\n      })\n    }\n  }\n\n  $('.userform').each(main)\n})\n\n\n\n// WEBPACK FOOTER //\n// ./client/src/bundles/UserForms.js","// Used for frontend userforms\nimport 'bundles/UserForms';\n\n\n\n// WEBPACK FOOTER //\n// ./client/src/bundles/bundle.js","module.exports = i18n;\n\n\n//////////////////\n// WEBPACK FOOTER\n// external \"i18n\"\n// module id = 0\n// module chunks = 0","module.exports = jQuery;\n\n\n//////////////////\n// WEBPACK FOOTER\n// external \"jQuery\"\n// module id = 1\n// module chunks = 0"],"sourceRoot":""}